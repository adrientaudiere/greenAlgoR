% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ga_footprint.R
\name{ga_footprint}
\alias{ga_footprint}
\title{Compute footprint in grams of CO2 using \href{https://doi.org/10.1002/advs.202100707}{Lannelongue et al. 2021} algorithm}
\usage{
ga_footprint(
  runtime_h = NULL,
  location_code = "WORLD",
  PUE = 1.67,
  TDP_per_core = 12,
  n_cores = 1,
  cpu_model = "Any",
  memory_ram = NULL,
  power_draw_per_gb = 0.3725,
  PSF = 1,
  usage_core = 1,
  add_ref_values = TRUE,
  add_storage_estimation = FALSE,
  mass_storage = NULL,
  carbon_intensity = NULL,
  TDP_cpu = NULL,
  ref_value = NULL
)
}
\arguments{
\item{runtime_h}{Run time in hours (int). If runtime_h == "session",
the runtime is compute using the actual R session}

\item{location_code}{(character list of country or region available in  )}

\item{PUE}{(int) Power usage effectiveness of the server.
See https://github.com/GreenAlgorithms/green-algorithms-tool/blob/master/data/v2.2/defaults_PUE.csv
for example of values. If you are using your personal computer, set PUE to 1.}

\item{TDP_per_core}{(int. in Watt, default 12). Find your cpu TDP and your nb of cpu on
https://www.techpowerup.com/cpu-specs/ or in
http://calculator.green-algorithms.org/ if available.
Owerwrite by cpu_model param.}

\item{n_cores}{(int, default 1) Number of cores.
Owerwrite by cpu_model param.}

\item{cpu_model}{Must be present in the list of
http://calculator.green-algorithms.org/. If CPU is set, the parameter
TPD_per_core and n_cores are overwriting by info from the cpu_model.
"auto" modality (find the cpu using \code{benchmarkme::get_cpu()$model_name})
is not running for the moment.}

\item{memory_ram}{(int. in GB) The memory RAM. If memory_ram is NULL,
use benchmarkme::get_ram() to get the RAM.}

\item{power_draw_per_gb}{(int. in Watt, default 0.3725) The power draw for
each GB of RAM}

\item{PSF}{(int, default 1) Pragmatic Scaling Factor. Citation from
\href{https://doi.org/10.1002/advs.202100707}{Lannelongue et al. 2021}:
"Many analyses are presented as a single run of a particular algorithm or
software tool; however, computations are rarely performed only once.
Algorithms are run multiple times, sometimes hundreds, systematically or
manually, with different parameterizations. Statistical models may include
any number of combinations of covariates, fitting procedures, etc.
It is important to include these repeats in the carbon footprint.
To take into account the number of times a computation is performed in
practice, the PSF was defined, a scaling factor by which the estimated
GHG emissions are multiplied."}

\item{usage_core}{(int, default 1).
The usage factor corrects for the real core usage
(default is 1, i.e. full usage).}

\item{add_ref_values}{(logical, default TRUE) Do we compute and return
reference values to compare to your footprint ?}

\item{add_storage_estimation}{(logical, default FALSE) Do we compute the
footprint of mass storage ? By default FALSE because it is far less
important than cpu and memory usage. Note that
\href{https://github.com/GreenAlgorithms/green-algorithms-tool}{green-algorithms}
website do not compute mass storage usage.}

\item{mass_storage}{(int. in GB, default NULL) The size of the mass_storage.
Only used if add_storage_estimation is set to TRUE. If set to NULL, use
the \code{base::gc()} function to estimate storage used.}

\item{carbon_intensity}{(default NULL). Advanced users only.
A dataframe with \code{location} and \code{carbonIntensity}
columns. Set to carbon_intensity_internal if NULL.
carbon_intensity_internal is set using command line
csv_from_url_ga("https://raw.githubusercontent.com/GreenAlgorithms/green-algorithms-tool/refs/heads/master/data/v2.2/CI_aggregated.csv")}

\item{TDP_cpu}{(default NULL). Advanced users only.
A dataframe with \code{model}, \code{n_cores} and \code{TDP_per_core}
columns. Set to TDP_cpu_internal if NULL.
TDP_cpu_internal is set using command line
csv_from_url_ga("https://raw.githubusercontent.com/GreenAlgorithms/green-algorithms-tool/refs/heads/master/data/v2.2/TDP_cpu.csv")}

\item{ref_value}{(default NULL). Advanced users only.
A dataframe with \code{variable} and \code{value}
columns. Set to ref_value_internal if NULL.
ref_value_internal is set using command line
csv_from_url_ga("https://raw.githubusercontent.com/GreenAlgorithms/green-algorithms-tool/refs/heads/master/data/v2.2/referenceValues.csv")}
}
\value{
A list of values
\itemize{
\item \code{runtime_h}: the input run time in hours
\item \code{location_code}: the input location code
\item \code{TDP_per_core}: the input TDP_per_core (if cpu_model is set, correspond to
the TDP_per_core for this cpu)
\item \code{n_cores}: the input n_cores (if cpu_model is set, correspond to
the n_cores for this cpu)
\item \code{cpu_model}: the input cpu model. If set to "Any", TDP_per_core and ncore are used
\item \code{memory_ram}: the input memory ram in GB
\item \code{power_draw_per_gb}: the input power draw per GB
\item \code{usage_core}: the input usage core
\item \code{carbon_intensity}: the input carbon intensity (depend on location code)
\item \code{PUE}: the input PUE
\item \code{PSF}: the input PUE
\item \code{power_draw_for_cores_kWh}: the output power draw for cores in kWh
\item \code{power_draw_for_memory_kWh}: the output power draw for RAM memory in kWh
\item \code{energy_needed_kWh}: the output energy needed in kWh
\item \code{carbon_footprint_gCO2}: the output carbon footprint in grams of CO2
\item \code{ref_value}: (optionnal, return if add_ref_values is TRUE) : a dataframe
\item \code{power_draw_storage_kWh}: (optionnal, return if add_storage_estimation is TRUE) the output power draw for mass storage in kWh
}
}
\description{
\if{html}{\out{
<a href="https://adrientaudiere.github.io/greenAlgoR/articles/Rules.html#lifecycle">
<img src="https://img.shields.io/badge/lifecycle-experimental-orange" alt="lifecycle-experimental"></a>
}}


Please cite Lannelongue, L., Grealey, J., Inouye, M., Green Algorithms:
Quantifying the Carbon Footprint of Computation. Adv. Sci. 2021, 2100707.
https://doi.org/10.1002/advs.202100707

Default value are from https://github.com/GreenAlgorithms/green-algorithms-tool:
\itemize{
\item PUE: https://github.com/GreenAlgorithms/green-algorithms-tool/blob/master/data/v2.2/defaults_PUE.csv
\item TDP_per_core: https://raw.githubusercontent.com/GreenAlgorithms/green-algorithms-tool/refs/heads/master/data/v2.2/TDP_cpu.csv
\item power_draw_per_gb: https://onlinelibrary.wiley.com/doi/10.1002/advs.202100707
}

Text from the \href{https://github.com/GreenAlgorithms/green-algorithms-tool}{green-algorithms} website:

"""

The carbon footprint is calculated by estimating the energy draw of the
algorithm and the carbon intensity of producing this energy at a
given location:

$$carbon footprint = energy needed * carbon intensity$$

Where the energy needed is:

$$runtime * (power draw for cores * usage + power draw for memory) * PUE * PSF$$

The power draw for the computing cores depends on the model and number of cores,
while the memory power draw only depends on the size of memory available.
The usage factor corrects for the real core usage (default is 1, i.e. full usage).
The PUE (Power Usage Effectiveness) measures how much extra energy is needed
to operate the data centre (cooling, lighting etc.).

The PSF (Pragmatic Scaling Factor) is used to take into account multiple
identical runs (e.g. for testing or optimisation).

The Carbon Intensity depends on the location and the technologies used
to produce electricity. But note that the "energy needed"
\link{...} is independent of the location.

"""
}
\examples{
ga_footprint(
 runtime_h = 12,
 n_cores = 6,
 TDP_per_core = 15.8,
 location_code = "FR",
 PUE=1,
 cpu_model = "Core i5-9600KF"
)

ga_footprint(
  runtime_h = "session",
  PUE=1
)
}
\author{
Adrien Taudi√®re
}
