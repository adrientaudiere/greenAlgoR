<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Compute ecological footprint in R • greenAlgoR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Compute ecological footprint in R">
<meta name="description" content="This package computes ecological footprint in R (based on [green-algorithms](https://calculator.green-algorithms.org/). greenAlgoR also made it simple to compute ecological footprint of \{[targets](https://github.com/ropensci/targets)\} pipelines.">
<meta property="og:description" content="This package computes ecological footprint in R (based on [green-algorithms](https://calculator.green-algorithms.org/). greenAlgoR also made it simple to compute ecological footprint of \{[targets](https://github.com/ropensci/targets)\} pipelines.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">greenAlgoR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/adrientaudiere/greenAlgoR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="greenalgor">greenAlgoR<a class="anchor" aria-label="anchor" href="#greenalgor"></a>
</h1></div>
<p>This package computes ecological footprint in R (based on <a href="https://calculator.green-algorithms.org/" class="external-link">green-algorithms</a>, Lannelongue, Grealey, and Inouye (2021)). The aim is to facilitate the programmatic used of green-algorithms using the function <code><a href="reference/ga_footprint.html">ga_footprint()</a></code>. Moreover, greenAlgoR made it simple to compute ecological footprint of {<a href="https://github.com/ropensci/targets" class="external-link">targets</a>} pipelines using function <code><a href="reference/ga_targets.html">ga_targets()</a></code>.</p>
<p>It is a beta-version. Please submit issues if you found problems or if you want to contribute.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>greenAlgoR is not available on CRAN for the moment. You can install the stable development version from GitHub with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://devtools.r-lib.org/" class="external-link">"devtools"</a></span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"adrientaudiere/greenAlgoR"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="scientific-foundation">Scientific foundation<a class="anchor" aria-label="anchor" href="#scientific-foundation"></a>
</h2>
<div class="section level3">
<h3 id="the-algorithm-from-lannelongue-grealey-and-inouye-2021">The algorithm from Lannelongue, Grealey, and Inouye (2021)<a class="anchor" aria-label="anchor" href="#the-algorithm-from-lannelongue-grealey-and-inouye-2021"></a>
</h3>
<p>You can refer to <a href="https://calculator.green-algorithms.org/" class="external-link">green-algorithms</a> and Lannelongue, Grealey, and Inouye (2021) to understand the algorithm. Here is the short description from <a href="https://calculator.green-algorithms.org/" class="external-link">green-algorithms</a></p>
<p>The carbon footprint is calculated by estimating the energy draw of the algorithm and the carbon intensity of producing this energy at a given location:</p>
<pre class="math"><code>carbon footprint = energy needed * carbon intensity</code></pre>
<p>Where the energy needed is:</p>
<pre class="math"><code>runtime * (power draw for cores * usage + power draw for memory) * PUE * PSF</code></pre>
<p>The power draw for the computing cores depends on the model and number of cores, while the memory power draw only depends on the size of memory available. The usage factor corrects for the real core usage (default is 1, i.e. full usage). The PUE (Power Usage Effectiveness) measures how much extra energy is needed to operate the data centre (cooling, lighting etc.).</p>
<p>The PSF (Pragmatic Scaling Factor) is used to take into account multiple identical runs (e.g. for testing or optimisation). The Carbon Intensity depends on the location and the technologies used to produce electricity.</p>
</div>
</div>
<div class="section level2">
<h2 id="basic-use">Basic use<a class="anchor" aria-label="anchor" href="#basic-use"></a>
</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">load_all</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/adrientaudiere/greenAlgoR" class="external-link">"greenAlgoR"</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="in-classical-workflow">In classical workflow<a class="anchor" aria-label="anchor" href="#in-classical-workflow"></a>
</h3>
<div class="section level4">
<h4 id="using-explicit-input">Using explicit input<a class="anchor" aria-label="anchor" href="#using-explicit-input"></a>
</h4>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Your model must match exactly a name in TDP_cpu_internal$model</span></span>
<span><span class="va">fp_12h</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ga_footprint.html">ga_footprint</a></span><span class="op">(</span>runtime_h <span class="op">=</span> <span class="fl">12</span>, cpu_model <span class="op">=</span> <span class="st">"Core i3-10300"</span><span class="op">)</span></span>
<span><span class="va">fp_12h</span><span class="op">$</span><span class="va">carbon_footprint_total_gCO2</span></span>
<span><span class="co">#&gt; [1] 829.0232</span></span>
<span><span class="va">fp_12h</span><span class="op">$</span><span class="va">energy_needed_kWh</span></span>
<span><span class="co">#&gt; [1] 1.745312</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">fp_12h</span><span class="op">$</span><span class="va">ref_value</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>  y <span class="op">=</span> <span class="va">variable</span>,</span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span>,</span>
<span>  fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log10</a></span><span class="op">(</span><span class="va">prop_footprint</span><span class="op">)</span></span>
<span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>      variable <span class="op">=</span> <span class="st">"Total"</span>,</span>
<span>      value <span class="op">=</span> <span class="va">fp_12h</span><span class="op">$</span><span class="va">carbon_footprint_total_gCO2</span></span>
<span>    <span class="op">)</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"grey30"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>      variable <span class="op">=</span> <span class="st">"Cores"</span>,</span>
<span>      value <span class="op">=</span> <span class="va">fp_12h</span><span class="op">$</span><span class="va">carbon_footprint_cores</span></span>
<span>    <span class="op">)</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"darkred"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>      variable <span class="op">=</span> <span class="st">"Memory"</span>,</span>
<span>      value <span class="op">=</span> <span class="va">fp_12h</span><span class="op">$</span><span class="va">carbon_footprint_memory</span></span>
<span>    <span class="op">)</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"orange"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span></span>
<span>    trans <span class="op">=</span> <span class="st">"log1p"</span>,</span>
<span>    breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">^</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log1p</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">fp_12h</span><span class="op">$</span><span class="va">ref_value</span><span class="op">$</span><span class="va">value</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span></span>
<span>    xintercept <span class="op">=</span> <span class="va">fp_12h</span><span class="op">$</span><span class="va">carbon_footprint_total_gCO2</span>,</span>
<span>    col <span class="op">=</span> <span class="st">"grey30"</span>,</span>
<span>    lwd <span class="op">=</span> <span class="fl">1.2</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_label</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="reference/round_conditionaly.html">round_conditionaly</a></span><span class="op">(</span><span class="va">prop_footprint</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"grey90"</span>,</span>
<span>    position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_stack.html" class="external-link">position_stack</a></span><span class="op">(</span>vjust <span class="op">=</span> <span class="fl">1.1</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Carbon footprint of the analysis"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"("</span>, <span class="va">fp_12h</span><span class="op">$</span><span class="va">carbon_footprint_total_gCO2</span>, <span class="st">" g CO2"</span>, <span class="st">")"</span><span class="op">)</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Please cite Lannelongue et al. 2021 (10.1002/advs.202100707)"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Carbon footprint (g CO2) in log10"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Modality"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-5-1.png" alt="Barplot of the total footprint of the analysis, the footprint of memory and the footprint of cpu. Other footprint such as flight Paris-London or one-hour of netflix streaming are also plot." width="100%"></p>
</div>
<div class="section level4">
<h4 id="based-on-the-r-session">Based on the R session<a class="anchor" aria-label="anchor" href="#based-on-the-r-session"></a>
</h4>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fp_session</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ga_footprint.html">ga_footprint</a></span><span class="op">(</span>runtime_h <span class="op">=</span> <span class="st">"session"</span>, add_storage_estimation <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">fp_session</span><span class="op">$</span><span class="va">carbon_footprint_total_gCO2</span></span>
<span><span class="co">#&gt;  user.self </span></span>
<span><span class="co">#&gt; 0.02016005</span></span>
<span><span class="va">fp_session</span><span class="op">$</span><span class="va">energy_needed_kWh</span></span>
<span><span class="co">#&gt;    user.self </span></span>
<span><span class="co">#&gt; 4.244221e-05</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="based-on-a-targets-pipeline">Based on a targets pipeline<a class="anchor" aria-label="anchor" href="#based-on-a-targets-pipeline"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/ga_targets.html">ga_targets</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="roadmap">Roadmap<a class="anchor" aria-label="anchor" href="#roadmap"></a>
</h2>
<ul class="task-list">
<li><label><input type="checkbox">Automatically find cpu model using benchmarkme::get_cpu()</label></li>
<li><label><input type="checkbox">Submit to CRAN?</label></li>
</ul>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-lannelongue_green_2021" class="csl-entry">
Lannelongue, Loïc, Jason Grealey, and Michael Inouye. 2021. “Green Algorithms: Quantifying the Carbon Footprint of Computation.” <em>Advanced Science</em> 8 (12): 2100707. <a href="https://doi.org/10.1002/advs.202100707" class="external-link uri">https://doi.org/10.1002/advs.202100707</a>.
</div>
</div>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/adrientaudiere/greenAlgoR/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/adrientaudiere/greenAlgoR/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing greenAlgoR</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Adrien Taudière <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0003-1088-1182" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.gnu.org/licenses/gpl-3.0" class="external-link"><img src="https://img.shields.io/badge/License-GPL%20v3-blue.svg" alt="License: GPL v3"></a></li>
<li><a href="https://doi.org/10.5281/zenodo.14184331" class="external-link"><img src="https://zenodo.org/badge/888940618.svg" alt="DOI"></a></li>
<li><a href="https://app.codecov.io/gh/adrientaudiere/greenAlgoR" class="external-link"><img src="https://codecov.io/gh/adrientaudiere/greenAlgoR/graph/badge.svg?token=NXFRSIKYC0" alt="codecov"></a></li>
<li><a href="https://www.codefactor.io/repository/github/adrientaudiere/greenalgor/overview/master" class="external-link"><img src="https://www.codefactor.io/repository/github/adrientaudiere/greenalgor/badge/master" alt="CodeFactor"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adrien Taudière.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
